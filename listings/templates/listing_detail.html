{% extends "base.html" %}

{% block title %}{{ listing.title }}{% endblock %}

{% block content %}
<h1>{{ listing.title }}</h1>

<p><strong>Price:</strong> ${{ listing.price }}</p>
<p><strong>Condition:</strong> {{ listing.get_condition_display }}</p>
<p><strong>Product:</strong> {{ listing.product.product_name }}</p>
<p><strong>Stock:</strong> {{ listing.stock }}</p>
<p><strong>Seller:</strong> {{ listing.owner.username }}</p>

<h3>Description:</h3>
<p>{{ listing.listing_text }}</p>

{% if images %}
    <h3>Images:</h3>
    {% for image in images %}
        <img src="{{ image.image.url }}" width="300" alt="{{ image.caption }}">
    {% endfor %}
{% endif %}

<hr>

{% if is_owner %}
    <a href="{% url 'listings:edit_listing' l_id=listing.id %}">Edit</a>
{% endif %}

<a href="{% url 'listings:all_listings_page' %}">Back to Listings</a>

{% endblock %}
{% if user.is_authenticated and user != listing.owner %}
    <a href="{% url 'listings:message' listing_id=listing.id %}" style="display: inline-block; padding: 12px 25px; background: #28a745; color: white; text-decoration: none; border-radius: 5px; margin-top: 20px; font-size: 16px;">
        ðŸ“§ Contact Seller
    </a>
{% endif %}

{% if user.is_authenticated and user == listing.owner %}
    <p style="color: #666; margin-top: 20px;">This is your listing</p>
{% endif %}